# ğŸ“… 2025-08-20 íšŒê³ 

> **ë¶ì ë¶ì (BookJuk)** í”„ë¡œì íŠ¸ ë§ˆì´í˜ì´ì§€ í˜ì´ì§• ê¸°ëŠ¥ ì¶”ê°€

## ğŸ§­ ì˜¤ëŠ˜ ë…¼ì˜í•œ ì£¼ìš” ë‚´ìš©

* ë§ˆì´í˜ì´ì§€ ì°¸ì—¬ ëª¨ì„ ì •ë³´ ë‹¨ í˜ì´ì§• ê¸°ëŠ¥ ì¶”ê°€
* í”„ë¡œì íŠ¸ ë°œí‘œ ë¬¸ì„œ ì‘ì„± ë° ì‚°ì¶œë¬¼ ì •ë¦¬

## ğŸš© ë‚´ì¼ ì‘ì—…í•  ë‚´ìš©

* í”„ë¡œì íŠ¸ ë°œí‘œ

---

## âœ… ë§ˆì´í˜ì´ì§€ ì°¸ì—¬ ëª¨ì„ ì •ë³´ ë‹¨ í˜ì´ì§• ê¸°ëŠ¥ ì¶”ê°€ 
ì°¸ì—¬ ëª¨ì„ì˜ ê°œìˆ˜ê°€ 3ê°œ ì´ìƒ ë„˜ì–´ê°€ë©´ ìŒ“ì¸ ëª¨ì„ ë¦¬ìŠ¤íŠ¸ ë•Œë¬¸ì— ìŠ¤í¬ë¡¤ì´ ê¸¸ì–´ì ¸ uxë¥¼ í•´ì¹˜ê³  ìˆì—ˆë‹¤.   
MVP êµ¬í˜„ ì™„ë£Œ, ë²„ê·¸ ìˆ˜ì • ì™„ë£Œ í•˜ì—¬ í˜ì´ì§• ì²˜ë¦¬ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤.   

![img.png](img.png)   

ê¸°ì¡´ì—ëŠ” ë§ˆì´í˜ì´ì§€ ì§„ì…í–ˆì„ ë•Œ í•œ ë²ˆì˜ ì¡°íšŒë¡œ ì‚¬ìš©ì ì •ë³´ + ëª¨ì„ ì •ë³´ + í†µê³„ ì •ë³´ë¥¼ í•˜ë‚˜ì˜ API ë¡œ ê°€ì ¸ì˜¤ê²Œ ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤.   
í˜ì´ì§€ ê¸°ëŠ¥ ì¶”ê°€ë¡œ APIë¥¼ ì‚¬ìš©ì ì •ë³´ + í†µê³„ ì •ë³´ë§Œ ì¡°íšŒí•˜ëŠ” API ì™€ ì°¸ì—¬ ëª¨ì„ ì •ë³´ë§Œ ì¡°íšŒí•˜ëŠ” API ë‘ê°€ì§€ë¡œ ë¶„ë¦¬í–ˆë‹¤.   

API ë¶„ë¦¬ë¡œ ëª…ì„¸ì„œë¥¼ ìƒˆë¡­ê²Œ ì‘ì„±í–ˆê³  ë°±ì—”ë“œ ì½”ë“œì™€ í”„ë¡ íŠ¸ ì—”ë“œ ì½”ë“œë„ ìˆ˜ì •í–ˆë‹¤.   

1. ë°±ì—”ë“œ ì½”ë“œ ìˆ˜ì •
- MyPageResponseDto ìˆ˜ì •   
ì°¸ì—¬ ëª¨ì„ ì •ë³´ë¥¼ ë°›ì•„ì˜¤ë˜ MeetingInfoDto ë¥¼ í•„ë“œì™€ ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œì—ì„œ ì œê±°í–ˆë‹¤.
```
    public class MyPageResponse {
    
    
        private UserInfoDto profile;
        private StaticsInfoDto statistics;
    
    
        // ë§ˆì´í˜ì´ì§€ ì‘ë‹µ dtoë¡œ ë°”ê¾¸ëŠ” ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œ
        public static MyPageResponse of(UserInfoDto profile, StaticsInfoDto statistics) {
    
            return MyPageResponse.builder()
                    .profile(profile)
                    .statistics(statistics)
                    .build();
        }
    }
```
- MyPageService ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆ˜ì •   
ì¸ì¦ëœ ì‚¬ìš©ì ì´ë©”ì¼ ->  ì‚¬ìš©ì ì°¾ê¸° -> ì‚¬ìš©ì ì •ë³´ íšë“ -> ì‚¬ìš©ì idë¡œ ì°¸ì—¬ ëª¨ì„ì„ ì¡°íšŒí•´ì˜¤ë˜ ë¡œì§ì„ í˜ì´ì§• ì²˜ë¦¬ë¥¼ ìœ„í•´ í•´ë‹¹ ë¡œì§ì—ì„œ ë¶„ë¦¬í–ˆë‹¤.   
```
    /**
     * ë§ˆì´í˜ì´ì§€ ì§„ì… ì •ë³´ ì¡°íšŒ(ë””í´íŠ¸) ë¡œì§ì…ë‹ˆë‹¤.
     * @param email - ë¡œê·¸ì¸í•œ ìœ ì €ê°€ ì œì‹œí•œ í† í°ì—ì„œ íŒŒì‹±í•œ ì´ë©”ì¼ ì •ë³´
     * @return - í”„ë¡ íŠ¸ ë‹¨ì— ì „ë‹¬í•  ìœ ì € ì •ë³´, ìœ ì € ëª¨ì„ ì •ë³´, ìœ ì €ì˜ ëª¨ì„ ì°¸ì—¬, ì¢‹ì•„ìš” í†µê³„ ì •ë³´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
     */
    public MyPageResponse getMyPage(String email) {

        // 1. ì‚¬ìš©ì ì´ë©”ì¼ë¡œ ìœ ì € ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        User user = getUserByEmail(email);

        // ì¡°íšŒëœ ìœ ì € ì •ë³´ë¥¼ ë§ˆì´í˜ì´ì§€ ì‘ë‹µì— í•„ìš”í•œ dto ë¡œ ë³€ê²½
        UserInfoDto profile = UserInfoDto.from(user);


        // 3. ìœ ì €ì˜ ëª¨ì„ ì°¸ì—¬, ì¢‹ì•„ìš” í†µê³„ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸°
        Long userId = user.getId();
        Long meetingCount = meetingParticipantRepository.countMeetingByUserId(userId);
        StaticsInfoDto stats = getStatsByUserId(userId, meetingCount);

        return MyPageResponse.of(profile, stats);

    }
    
    /**
     * ì‚¬ìš©ìì˜ id ì •ë³´ë¡œ ë°›ì€ ì¢‹ì•„ìš” ê°œìˆ˜ë¥¼ ì¡°íšŒí•˜ê³  ì°¸ì—¬í•œ ë¦¬ìŠ¤íŠ¸ ê°œìˆ˜ì™€ í•¨ê»˜ í•„ìš”í•œ ì •ë³´ë§Œ ë°˜í™˜í•˜ëŠ” ë©”ì†Œë“œì…ë‹ˆë‹¤.
     * @param id - ì´ë©”ì¼ ì •ë³´ë¡œ ì°¾ì€ ìœ ì € id
     * @param count - ì°¸ì—¬ ë¦¬ìŠ¤íŠ¸ì˜ size
     * @return - ìœ ì € id ì •ë³´ë¡¤ ì°¾ì€ ì¢‹ì•„ìš” ê°œìˆ˜ì™€ ì°¸ì—¬ ë¦¬ìŠ¤íŠ¸ì˜ ê°œìˆ˜ë¥¼ ë°›ì•„ í•„ìš”í•œ ì •ë³´ë§Œ ë§¤í•‘í•œ dto
     */
    private StaticsInfoDto getStatsByUserId(Long id, Long count) {
        Long reviewCount = meetingReviewRepository.countReviewByUserId(id);
        return StaticsInfoDto.of(reviewCount, count);
    }
```
ê¸°ì¡´ì—ëŠ” ì‚¬ìš©ì idë¡œ ê°€ì ¸ì˜¨ ëª¨ì„ ì •ë³´ì—ì„œ ë°”ë¡œ ëª¨ì„ ì°¸ì—¬ ê°œìˆ˜ë¥¼ í™•ì¸ í•  ìˆ˜ ìˆì—ˆëŠ”ë°   
ë³€ê²½ëœ ë¡œì§ì—ì„œëŠ” ì‚¬ìš©ì idë¡œ ëª¨ì„ ì°¸ì—¬ ì •ë³´ ê°œìˆ˜ë¥¼ ì¡°íšŒí•˜ê²Œ ìˆ˜ì •í–ˆê³  ë°˜í™˜ íƒ€ì…ë„ int -> Long ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆë‹¤.   
ë°˜í™˜íƒ€ì…ì´ ë³€ê²½ë¨ì— ë”°ë¼ StaticsInfoDto ì˜ meetingCount íƒ€ì…ë„ Long ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆë‹¤.   

ì°¸ì—¬ ëª¨ì„ ì •ë³´ë§Œ ì¡°íšŒí•´ì˜¤ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìƒˆë¡­ê²Œ ì‘ì„±í•˜ì˜€ë‹¤.
```
    /**
     * ì‚¬ìš©ìì˜ id ì •ë³´ë¡œ ì°¸ì—¬í•œ ë¯¸íŒ… ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê³  í•„ìš”í•œ ì •ë³´ë§Œ ë°˜í™˜í•˜ëŠ” ë©”ì†Œë“œì…ë‹ˆë‹¤.
     * @param email - í† í° ì •ë³´ë¡œ ë¶€í„° ê°€ì ¸ì˜¨ ì‚¬ìš©ì ì‹ë³„ ì´ë©”ì¼
     * @return - ìœ ì €ì˜ id ë¡œ ì°¸ì—¬í•œ ë¯¸íŒ… ì •ë³´ë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ë°›ì€ í›„ í•„ìš”í•œ ì •ë³´ë§Œ dto ë¡œ ë§¤í•‘í•œ ë¦¬ìŠ¤íŠ¸
     */
    public Page<MeetingInfoDto> getMyMeetings(String email, Pageable pageable) {
        // ì´ë©”ì¼ë¡œ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ìš”ê¸°
        User user = getUserByEmail(email);
        Long id = user.getId();

        // ì‚¬ìš©ì id ì •ë³´ë¡œ ì°¸ì—¬í•œ ë¯¸íŒ… ì •ë³´ ë°˜í™˜
        Page<MeetingParticipant> meetingParticipants =
                meetingParticipantRepository.findMeetingsByUserId(id, pageable);

        // ë°˜í™˜ëœ í˜ì´ì§€ ë¦¬ìŠ¤íŠ¸ë¥¼ dto ë¡œ ë§¤í•‘
        return meetingParticipants.map(MeetingInfoDto::from);
    }
```
- MeetingParticipantCustom, MeetingParticipantRepositoryImpl ì— í•„ìš”í•œ ë©”ì†Œë“œ ì¶”ê°€   
controller -> service -> repository ë¡œ í˜ì´ì§• ì²˜ë¦¬ë¥¼ ìœ„í•´ Pageable ê°ì²´ë¥¼ ì „ë‹¬í•˜ê³    
íƒ€ì…ë„ page íƒ€ì…ìœ¼ë¡œ ë³€ê²½í•˜ì˜€ë‹¤.
```
    public interface MeetingParticipantCustom {
    
        // ë¯¸íŒ… idë¡œ ë¯¸íŒ… ì°¸ì—¬ì ì°¾ê¸°
        List<User> findMeetingParticipantsByMeetingId(Long id);
    
        // ìœ ì € idë¡œ ì°¸ì—¬ ë¯¸íŒ… ë¦¬ìŠ¤íŠ¸ ë°˜í™˜
        Page<MeetingParticipant> findMeetingsByUserId(Long id, Pageable pageable);
    
        // ìœ ì € idë„ ì°¸ì—¬ ë¯¸íŒ… ë¦¬ìŠ¤íŠ¸ì˜ ì´ ê°œìˆ˜ ë°˜í™˜
        Long countMeetingByUserId(Long id);
    }
    
    public class MeetingParticipantRepositoryImpl implements MeetingParticipantCustom {
      
        ...
    
        // ìœ ì € idë¡œ ì°¸ì—¬í•œ ë¯¸íŒ… id ë°˜í™˜
        @Override
        public Page<MeetingParticipant> findMeetingsByUserId(Long id, Pageable pageable) {
    
            List<MeetingParticipant> contents = factory
                    .selectFrom(meetingParticipant)
                    .where(meetingParticipant.participant.id.eq(id))
                    .offset(pageable.getOffset())   // ì‹œì‘ ìœ„ì¹˜
                    .limit(pageable.getPageSize())  // í˜ì´ì§€ í¬ê¸°
                    .fetch();
    
            Long total = factory
                    .select(meetingParticipant.count())
                    .from(meetingParticipant)
                    .where(meetingParticipant.participant.id.eq(id))
                    .fetchOne();
    
            return new PageImpl<>(contents, pageable, total);
        }
    
        // ìœ ì € idë¡œ ì°¸ì—¬í•œ ë¯¸íŒ…ì˜ ì´ ê°œìˆ˜ ë°˜í™˜
        @Override
        public Long countMeetingByUserId(Long id) {
            return factory
                    .select(meetingParticipant.meeting.count())
                    .from(meetingParticipant)
                    .where(meetingParticipant.participant.id.eq(id))
                    .fetchOne();
        }
    
    }
```
- MyPageController ì°¸ì—¬ ëª¨ì„ ì •ë³´ë§Œ ì¡°íšŒí•´ì˜¤ëŠ” Get ìš”ì²­ ë©”ì†Œë“œ ì¶”ê°€   
í˜ì´ì§€ëŠ” 0ë²ˆ ë¶€í„° ì‹œì‘ 3ê°œì”© ì˜ë¼ì„œ í˜ì´ì§• ì²˜ë¦¬ë¥¼ ì§„í–‰í•˜ê²Œ ì‘ì„±í–ˆë‹¤.
```
    @GetMapping("/meetings")
    public ResponseEntity<?> getMyMeetings(
            @AuthenticationPrincipal String email,
            @PageableDefault(page = 0, size = 3, sort = "createdAt", direction = Sort.Direction.DESC) Pageable pageable
    ) {
        Page<MeetingInfoDto> response = myPageService.getMyMeetings(email, pageable);
        return ResponseEntity.ok(ApiResponse.success("ë§ˆì´í˜ì´ì§€ ë‚˜ì˜ ì°¸ì—¬ ëª¨ì„ ì •ë³´ ì¡°íšŒë¥¼ ì„±ê³µí–ˆìŠµë‹ˆë‹¤.", response));
    }
```

2. í”„ë¡ íŠ¸ ì—”ë“œ ì½”ë“œ ìˆ˜ì •

