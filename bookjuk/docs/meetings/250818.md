# 📅 2025-08-18 회고

> **북적북적(BookJuk)** 프로젝트 마이페이지 프론트엔드 구현

## 🧭 오늘 논의한 주요 내용

* 타임리프와 javascript 를 활용하여 마이페이지 정보 조회 프론트엔드 단을 구현 

## 🚩 내일 작업할 내용

* 마이페이지 프로필 수정 프론트엔드 구현
---

## ✅ 마이페이지 정보 조회 프론트엔드 구현
타임리프, javascript 를 활용해 백엔드에서 정보를 조회하고   
가져온 사용자 정보(프로필 정보, 모임 참여 정보, 통계 정보)를 확인할 수 있는   
화면 단을 구현했다.   

랜더링 관련 js
```
//=========== 렌더링 관련 함수 ============//
const viewMyPage = (myInfo) => {
    console.log(myInfo)
    // 1. 마이페이지 정보를 뿌릴 태그
    // 개인 정보 태그
    const $profileHeader = document.querySelector('.profile-header');
    const $genreTags = document.querySelector('.genre-tags');

    // 통계 정보 태그

    // 모임 정보 태그
    const $meetingList = document.querySelector('.meetings-list');
    const $meetingItem = document.querySelector(".meeting-item");
    const $noMeetings = document.getElementById('emptyState');

    // 2. 랜더링 전 기존 정보 초기화
    $profileHeader.innerHTML = ` `;
    $meetingList.innerHTML = ` `;
    $receivedLikes.textContent = ` `;
    $participatedMeetings.textContent = ` `;
    $genreTags.innerHTML = ` `;

    // 3. 조회 값 랜더링
    // 개인 정보
    const profile = myInfo.data.profile;
    $profileHeader.innerHTML = `
        <div class="profile-image" id="profileImage">
            <img src="${profile.profileImage}" alt="프로필 사진">
        </div>
        <div class="profile-name" id="profileName">${profile.username}</div>
        <div class="profile-email" id="profileEmail">${profile.email}</div>
        <div class="profile-bio" id="profileBio">${profile.introduction}</div>
    `;
    $genreTags.innerHTML = `
       <span class="genre-tag">${profile.preferredGenre}</span>
    `

    // 통계 정보
    const stat = myInfo.data.statistics;
    $receivedLikes.textContent = `${stat.receivedLikes}`;
    $participatedMeetings.textContent = `${stat.participatedMeeting}`;

    // 미팅 정보
    const meetings = myInfo.data.meetings;
    if(meetings.length === 0) {

        $noMeetings.style.display = 'block';

    } else {

        $noMeetings.style.display = 'none';
        meetings.forEach(meeting => {
            const $meetingItem = document.createElement('div');

            let roleClass = ``;
            let roleName = ``;

            let meetingStatus = ``;

            if(meeting.meetingStatus === 'RECRUITING') meetingStatus = '모집중';
            else if(meeting.meetingStatus === 'COMPLETED') meetingStatus = '종료';
            if(meeting.meetingStatus === 'CANCELLED') meetingStatus = '취소';

            if(meeting.role === 'HOST') {
                roleClass = 'role-host';
                roleName = '호스트';
            } else if((meeting.role === 'PARTICIPANT')){
                roleClass = 'role-participant';
                roleName = '참여자';
            }

            $meetingItem.innerHTML = `
                <div class="meeting-header">
                    <div class="meeting-info">
                        <div class="meeting-title">${meeting.meetingTitle}</div>
                        <div class="meeting-book">
                            <span class="book-title">${meeting.book.title}</span>
                            <span class="book-author">${meeting.book.author}</span>
                        </div>
                        <div class="meeting-meta">
                            <div class="meeting-meta-item">
                                <span>🗓️</span>
                                <span class="date">${formatDate(meeting.meetingTime)}</span>
                            </div>
                        </div>
                    </div>
                    <div class="meeting-status">
                        <span class="status-badge status-recruiting">${meetingStatus}</span>
                        <span class="role-badge ${roleClass}">${roleName}</span>
                    </div>
                </div>
            `;
            $meetingItem.className = 'meeting-item';
            $meetingItem.dataset.id = meeting.meetingId;
            $meetingList.append($meetingItem);
        })
    }
}
```

서버 요청 js
```
const fetchGetMyPage = async () => {
    console.log("마이페이지 js");
    const token = getJwtTokenFromLocalStorage();
    if (!token) {
        throw new Error('인증 토큰이 없습니다.');
    }
    const res = await fetch('/api/mypage', {
        method: 'GET',
        headers: {
            'Authorization': `Bearer ${token}`
        }
    });
    const result = await res.json();
    console.log(result);
    viewMyPage(result);
}
```
토근 인증과 검증 관련 함수는 다른 팀원들이 만든 것을 재사용하였다.

---

## 💭 8/18 일 회고
마이페이지에 진입하면 바로 서버 요청이 시작되고 정보를 뿌려준다.   
정보 조회의 경우 api 를 기반으로 백엔드 단을 잘 구현해두어 빠르게 프론트단을 완성할 수 있었다.   
정보를 가져오는 과정에서 json 이름과 js에 작성한 키값이 달라 undefined 가 뜨긴 했으나   
수정하여 텍스트가 제대로 나오는 것을 확인했다.


